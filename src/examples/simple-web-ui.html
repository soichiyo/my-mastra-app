<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mastra ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .chat-container {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .chat-header {
      background: #007bff;
      color: white;
      padding: 15px;
      text-align: center;
    }

    .chat-messages {
      height: 400px;
      overflow-y: auto;
      padding: 15px;
      background: #f8f9fa;
    }

    .message {
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 8px;
      max-width: 80%;
    }

    .message.user {
      background: #e3f2fd;
      margin-left: auto;
      text-align: right;
    }

    .message.assistant {
      background: #f1f3f4;
      margin-right: auto;
    }

    .chat-input {
      padding: 15px;
      background: white;
      border-top: 1px solid #dee2e6;
    }

    .input-group {
      display: flex;
      gap: 10px;
    }

    .input-group input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
    }

    .input-group button {
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .input-group button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .test-buttons {
      margin-top: 20px;
      text-align: center;
    }

    .test-buttons button {
      margin: 5px;
      padding: 8px 16px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
    }

    .info-panel {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
    }

    .info-panel h4 {
      margin-top: 0;
      color: #856404;
    }

    .info-panel ul {
      margin: 10px 0;
      padding-left: 20px;
    }

    .info-panel li {
      margin: 5px 0;
    }
  </style>
</head>

<body>
  <div class="chat-container">
    <div class="chat-header">
      <h2>ğŸ¤– Mastra ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
      <p>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¨˜æ†¶åŠ›ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†</p>
    </div>

    <div class="chat-messages" id="chatMessages">
      <div class="message assistant">
        <strong>ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ:</strong> ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ä»˜ãã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚ä½•ã§ã‚‚ãŠèã‹ã›ãã ã•ã„ã€‚
      </div>
    </div>

    <div class="chat-input">
      <div class="input-group">
        <input type="text" id="messageInput" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..." onkeypress="handleKeyPress(event)">
        <button onclick="sendMessage()" id="sendButton">é€ä¿¡</button>
      </div>
    </div>
  </div>

  <div class="test-buttons">
    <h4>ğŸ§ª ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ</h4>
    <button onclick="runTest1()">ãƒ†ã‚¹ãƒˆ1: åå‰ã®è¨˜æ†¶</button>
    <button onclick="runTest2()">ãƒ†ã‚¹ãƒˆ2: è©³ç´°æƒ…å ±ã®è¨˜æ†¶</button>
    <button onclick="runTest3()">ãƒ†ã‚¹ãƒˆ3: ä¼šè©±ã®ç¶™ç¶šæ€§</button>
    <button onclick="clearChat()">ãƒãƒ£ãƒƒãƒˆã‚’ã‚¯ãƒªã‚¢</button>
  </div>

  <div class="info-panel">
    <h4>ğŸ’¡ ãƒ†ã‚¹ãƒˆã®èª¬æ˜</h4>
    <ul>
      <li><strong>ãƒ†ã‚¹ãƒˆ1:</strong> åå‰ã‚’æ•™ãˆã¦ã€å¾Œã§è¦šãˆã¦ã„ã‚‹ã‹ç¢ºèª</li>
      <li><strong>ãƒ†ã‚¹ãƒˆ2:</strong> è©³ç´°ãªæƒ…å ±ã‚’æ•™ãˆã¦ã€è¨˜æ†¶ã‚’ãƒ†ã‚¹ãƒˆ</li>
      <li><strong>ãƒ†ã‚¹ãƒˆ3:</strong> é•·ã„ä¼šè©±ã§æ–‡è„ˆã‚’ç¶­æŒã§ãã‚‹ã‹ãƒ†ã‚¹ãƒˆ</li>
    </ul>
    <p><strong>æ³¨æ„:</strong> ã“ã®UIã¯ãƒ‡ãƒ¢ç”¨ã§ã™ã€‚å®Ÿéš›ã®ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã¯ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼ˆhttp://localhost:4112ï¼‰ã§ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚</p>
  </div>

  <script>
    let messageCount = 0;

    function addMessage(content, role) {
      const chatMessages = document.getElementById('chatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${role}`;
      messageDiv.innerHTML = `<strong>${role === 'user' ? 'ã‚ãªãŸ' : 'ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ'}:</strong> ${content}`;
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      messageCount++;
    }

    function sendMessage() {
      const input = document.getElementById('messageInput');
      const message = input.value.trim();

      if (!message) return;

      addMessage(message, 'user');
      input.value = '';

      // ãƒ‡ãƒ¢ç”¨ã®å¿œç­”ï¼ˆå®Ÿéš›ã®ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã¯ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒ†ã‚¹ãƒˆï¼‰
      setTimeout(() => {
        let response = "ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ãŒã€ã“ã®UIã¯ãƒ‡ãƒ¢ç”¨ã§ã™ã€‚å®Ÿéš›ã®ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼ˆhttp://localhost:4112ï¼‰ã§BasicMemoryAgentã¾ãŸã¯PersonalAssistantAgentã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚";

        if (message.includes('åå‰') && message.includes('è¦šãˆ')) {
          response = "ãƒ‡ãƒ¢UIã§ã¯å®Ÿéš›ã®ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã¯å‹•ä½œã—ã¾ã›ã‚“ã€‚ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ï¼";
        } else if (message.includes('ã“ã‚“ã«ã¡ã¯') || message.includes('ã¯ã˜ã‚ã¾ã—ã¦')) {
          response = "ã“ã‚“ã«ã¡ã¯ï¼ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„å ´åˆã¯ã€ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚";
        }

        addMessage(response, 'assistant');
      }, 1000);
    }

    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    function runTest1() {
      addMessage("ç§ã®åå‰ã¯ç”°ä¸­å¤ªéƒã§ã™", 'user');
      setTimeout(() => {
        addMessage("ã“ã‚“ã«ã¡ã¯ç”°ä¸­å¤ªéƒã•ã‚“ï¼ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚", 'assistant');
        setTimeout(() => {
          addMessage("ç§ã®åå‰ã‚’è¦šãˆã¦ã„ã¾ã™ã‹ï¼Ÿ", 'user');
          setTimeout(() => {
            addMessage("ã¯ã„ã€ç”°ä¸­å¤ªéƒã•ã‚“ã§ã™ã­ï¼", 'assistant');
          }, 1000);
        }, 1000);
      }, 1000);
    }

    function runTest2() {
      addMessage("ç§ã¯æ±äº¬ã«ä½ã‚“ã§ã„ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒå¥½ãã§ã™", 'user');
      setTimeout(() => {
        addMessage("æ±äº¬ã§ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼", 'assistant');
        setTimeout(() => {
          addMessage("ç§ã«ã¤ã„ã¦è¦šãˆã¦ã„ã‚‹ã“ã¨ã‚’æ•™ãˆã¦ãã ã•ã„", 'user');
          setTimeout(() => {
            addMessage("ç”°ä¸­å¤ªéƒã•ã‚“ã§ã€æ±äº¬ã«ä½ã‚“ã§ã„ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒãŠå¥½ãã§ã™ã­ï¼", 'assistant');
          }, 1000);
        }, 1000);
      }, 1000);
    }

    function runTest3() {
      addMessage("ä»Šæ—¥ã®å¤©æ°—ã«ã¤ã„ã¦è©±ã—ã¾ã—ã‚‡ã†", 'user');
      setTimeout(() => {
        addMessage("å¤©æ°—ã®è©±ã€ã„ã„ã§ã™ã­ï¼", 'assistant');
        setTimeout(() => {
          addMessage("å…ˆã»ã©ä½•ã«ã¤ã„ã¦è©±ã—ã¾ã—ãŸã‹ï¼Ÿ", 'user');
          setTimeout(() => {
            addMessage("å¤©æ°—ã«ã¤ã„ã¦è©±ã—ã¦ã„ã¾ã—ãŸã­ï¼", 'assistant');
          }, 1000);
        }, 1000);
      }, 1000);
    }

    function clearChat() {
      const chatMessages = document.getElementById('chatMessages');
      chatMessages.innerHTML = '<div class="message assistant"><strong>ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ:</strong> ãƒãƒ£ãƒƒãƒˆãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸã€‚ä½•ã§ã‚‚ãŠèã‹ã›ãã ã•ã„ã€‚</div>';
      messageCount = 0;
    }
  </script>
</body>

</html>
